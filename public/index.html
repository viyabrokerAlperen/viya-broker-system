<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIYA BROKER | Global Maritime Intelligence</title>
    <link rel="icon" href="https://raw.githubusercontent.com/viyabrokerAlperen/viya-broker-system/main/viya_broker_logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&family=Orbitron:wght@400;600;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <div class="loader" id="loader"><div style="text-align: center;"><div class="spinner"></div><div style="font-family: 'Orbitron'; color: #00f2ff;">CALCULATING...</div></div></div>

    <div id="docModal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><span class="modal-title" id="modalTitle">TITLE</span><span class="close-btn" onclick="closeModal('docModal')">&times;</span></div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <div id="finModal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><span class="modal-title">DETAILED VOYAGE FINANCIAL BREAKDOWN</span><span class="close-btn" onclick="closeModal('finModal')">&times;</span></div>
            <div class="modal-body" id="finBody"></div>
        </div>
    </div>

    <div class="chat-btn" onclick="toggleChat()"><i class="fa-solid fa-robot"></i></div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header"><span><i class="fa-solid fa-brain"></i> VIYA AI</span><div><span onclick="toggleExpand()" style="cursor:pointer; margin-right:10px;"><i class="fa-solid fa-expand"></i></span><span onclick="toggleChat()" style="cursor:pointer">&times;</span></div></div>
        <div class="chat-body" id="chatBody"><div class="msg ai">Hello Captain! I am VIYA AI. Ask me about Regulations (SOLAS, MARPOL), Charter Parties, or Market Rates.</div></div>
        <div class="chat-input-area"><input type="text" id="chatInput" class="chat-input" placeholder="Type here..." onkeypress="handleEnter(event)"><button class="chat-send" onclick="sendChat()"><i class="fa-solid fa-paper-plane"></i></button></div>
    </div>

    <div id="landing-view">
        <img src="https://raw.githubusercontent.com/viyabrokerAlperen/viya-broker-system/main/viya_broker_logo.png" alt="LOGO" class="landing-logo-img">
        <div class="landing-sub">Global Maritime Brokerage System</div>
        <button class="btn-enter" onclick="enterSystem()">ENTER TERMINAL</button>
    </div>

    <nav id="mainNav">
        <div class="brand" onclick="switchView('dashboard')"><img src="https://raw.githubusercontent.com/viyabrokerAlperen/viya-broker-system/main/viya_broker_logo.png" alt="LOGO"> VIYA BROKER</div>
        <div class="nav-links">
            <div class="nav-item active" onclick="switchView('dashboard')">Terminal</div>
            <div class="nav-item" onclick="switchView('academy')">Academy</div>
            <div class="nav-item" onclick="switchView('regulations')">Regulations</div>
            <div class="nav-item" onclick="switchView('docs')">Docs</div>
            <div class="nav-item" onclick="switchView('pricing')">Membership</div>
            <div class="lang-switch" onclick="toggleLanguage()">EN | TR</div>
        </div>
        <div class="live-ticker">BRENT: <span id="oilPrice" class="blinking">...</span> MGO: <span id="hoPrice">...</span> VLSFO: <span id="vlsfoPrice">...</span></div>
    </nav>

    <div id="dashboard" class="view-section active">
        <div class="dash-grid">
            <aside class="panel">
                <div class="p-header"><i class="fa-solid fa-ship"></i> VESSEL PARAMETERS</div>
                <div class="p-body">
                    <div class="input-group"><label>VESSEL TYPE</label><select id="vType"><option value="SUPRAMAX">Supramax</option><option value="PANAMAX">Panamax</option><option value="CAPESIZE">Capesize</option><option value="MR_TANKER">MR Tanker</option></select></div>
                    <div class="input-group"><label>PORT</label><input type="text" id="refPort" list="portList" onchange="fillCoords()"></div>
                    <div class="input-group"><div style="display:grid; grid-template-columns:1fr 1fr; gap:5px;"><input type="number" id="vLat" placeholder="Lat"><input type="number" id="vLng" placeholder="Lng"></div></div>
                    <div class="input-group"><label>SPEED</label><input type="number" id="vSpeed" value="13.5"></div>
                    <div class="input-group"><label>QTY</label><input type="number" id="vQty" value="50000"></div>
                    <div class="input-group"><div style="display:grid; grid-template-columns:1fr 1fr; gap:5px;"><div><label>LOAD RATE</label><input type="number" id="vLoadRate" value="15000"></div><div><label>DISCH RATE</label><input type="number" id="vDischRate" value="10000"></div></div></div>
                    <button class="btn-action" onclick="scanMarket()">SCAN MARKET</button>
                    <div id="cargoResultList" class="cargo-list"></div>
                </div>
            </aside>
            <div class="panel"><div id="map"></div></div>
            <aside class="panel">
                <div class="p-header"><i class="fa-solid fa-file-invoice-dollar"></i> ESTIMATION</div>
                <div class="p-body" id="analysisPanel" style="display:none;">
                    <div class="stat-grid">
                        <div class="stat-card"><div class="stat-val" id="dispTCE">$0</div><div class="stat-lbl">TCE</div></div>
                        <div class="stat-card"><div class="stat-val" id="dispProfit">$0</div><div class="stat-lbl">PROFIT</div></div>
                    </div>
                    <button class="btn-download" style="margin:10px 0; border-color:#fbbf24; color:#fbbf24;" onclick="showFinancials()">VIEW FULL BREAKDOWN</button>
                    <div id="financialDetails"></div>
                    <div class="ai-insight" id="aiOutput"></div>
                </div>
                <div class="p-body" id="emptyState" style="text-align:center; padding-top:50px; color:#555;">Waiting...</div>
            </aside>
        </div>
    </div>

    <div id="academy" class="view-section"><div class="library-section"><div class="section-title">ACADEMY</div><div class="docs-grid" id="academyGrid"></div></div></div>
    <div id="regulations" class="view-section"><div class="library-section"><div class="section-title">REGULATIONS</div><div class="docs-grid" id="regsGrid"></div></div></div>
    <div id="docs" class="view-section"><div class="library-section"><div class="section-title">DOCUMENTS</div><div id="docsContainer"></div></div></div>
    <div id="pricing" class="view-section">
        <div class="pricing-container">
            <div class="price-card pro"><div class="plan-name">PRO</div><div class="plan-price">$199<span>/mo</span></div><button class="btn-plan pro">UPGRADE</button></div>
            <div class="price-card premium"><div class="plan-name">FLEET OWNER</div><div class="plan-price">$999<span>/mo</span></div><button class="btn-plan basic">CONTACT</button></div>
        </div>
    </div>

    <datalist id="portList"></datalist>
    <script src="app.js"></script>
</body>
</html>
